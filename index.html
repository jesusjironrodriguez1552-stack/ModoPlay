<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liga Efootball 2025 - Debug</title>
</head>
<body>
    <h1>Liga Efootball 2025 - Debug Mode</h1>
    
    <div id="debug-info">
        <h2>Debug Information:</h2>
        <p>Clubes loaded: <span id="clubes-status">Loading...</span></p>
        <p>Fixtures loaded: <span id="fixtures-status">Loading...</span></p>
        <p>Teams count: <span id="teams-count">0</span></p>
        <p>Fixtures count: <span id="fixtures-count">0</span></p>
    </div>

    <div id="teams-section">
        <h2>Teams List:</h2>
        <ul id="teams-list"></ul>
    </div>

    <div id="fixtures-section">
        <h2>First 2 Fixtures:</h2>
        <div id="fixtures-list"></div>
    </div>

    <div id="standings-section">
        <h2>Standings:</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Team</th>
                    <th>Played</th>
                    <th>Points</th>
                </tr>
            </thead>
            <tbody id="standings-body"></tbody>
        </table>
    </div>

    <script>
        console.log('Script starting...');
        
        // Check what global variables exist
        function checkGlobalVariables() {
            console.log('Global variables check:');
            console.log('window.customFixtures:', window.customFixtures);
            console.log('window.clubes:', window.clubes);
            console.log('window.fixtureHelper:', window.fixtureHelper);
        }
        
        // Debug function to check what's loaded
        function checkLoadedData() {
            console.log('Checking loaded data...');
            
            // Check clubes
            if (typeof clubes !== 'undefined') {
                console.log('Clubes loaded:', clubes);
                document.getElementById('clubes-status').textContent = 'Loaded ✓';
                document.getElementById('teams-count').textContent = clubes.length;
            } else {
                console.log('Clubes NOT loaded');
                document.getElementById('clubes-status').textContent = 'NOT loaded ✗';
            }
            
            // Check customFixtures
            if (typeof customFixtures !== 'undefined') {
                console.log('CustomFixtures loaded:', customFixtures);
                document.getElementById('fixtures-status').textContent = 'Loaded ✓';
                document.getElementById('fixtures-count').textContent = customFixtures.length;
            } else {
                console.log('CustomFixtures NOT loaded');
                document.getElementById('fixtures-status').textContent = 'NOT loaded ✗';
            }
            
            // Check fixtureHelper
            if (typeof fixtureHelper !== 'undefined') {
                console.log('FixtureHelper loaded:', fixtureHelper);
            } else {
                console.log('FixtureHelper NOT loaded');
            }
            
            checkGlobalVariables();
        }
        
        // Check for script load errors
        window.addEventListener('error', function(e) {
            console.error('Script error:', e.filename, e.lineno, e.message);
            document.getElementById('debug-info').innerHTML += `<p style="color: red;">Error loading: ${e.filename} - ${e.message}</p>`;
        });
    </script>
    
    <script src="clubes.js" onerror="console.error('Failed to load clubes.js'); document.getElementById('clubes-status').textContent = 'Load Error ✗';"></script>
    <script src="fixtures.js" onerror="console.error('Failed to load fixtures.js'); document.getElementById('fixtures-status').textContent = 'Load Error ✗';"></script>
    
    <script>
        
        function displayTeams() {
            if (typeof clubes === 'undefined') return;
            
            const teamsList = document.getElementById('teams-list');
            teamsList.innerHTML = '';
            
            clubes.forEach(club => {
                const li = document.createElement('li');
                li.textContent = `${club.name} - ${club.club || 'No club info'}`;
                teamsList.appendChild(li);
            });
        }
        
        function displayFixtures() {
            if (typeof customFixtures === 'undefined') return;
            
            const fixturesList = document.getElementById('fixtures-list');
            fixturesList.innerHTML = '';
            
            // Show only first 2 fixtures to avoid clutter
            customFixtures.slice(0, 2).forEach(jornada => {
                const div = document.createElement('div');
                div.innerHTML = `<h3>Fecha ${jornada.fecha}</h3>`;
                
                jornada.partidos.forEach(partido => {
                    const matchDiv = document.createElement('div');
                    matchDiv.textContent = `${partido.local} vs ${partido.visitante} - Jugado: ${partido.resultado.jugado}`;
                    div.appendChild(matchDiv);
                });
                
                fixturesList.appendChild(div);
            });
        }
        
        function displayStandings() {
            if (typeof clubes === 'undefined') return;
            
            const tbody = document.getElementById('standings-body');
            tbody.innerHTML = '';
            
            clubes.forEach(club => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${club.name}</td>
                    <td>0</td>
                    <td>0</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // Check immediately
        checkLoadedData();
        
        // Check after a delay to see if files load later
        setTimeout(() => {
            console.log('Delayed check...');
            checkLoadedData();
            displayTeams();
            displayFixtures();
            displayStandings();
        }, 1000);
        
        // Also check on window load
        window.addEventListener('load', () => {
            console.log('Window loaded, final check...');
            checkLoadedData();
            displayTeams();
            displayFixtures();
            displayStandings();
        });
    </script>
</body>
</html>
